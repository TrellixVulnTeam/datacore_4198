{% extends "base.html" %}
{% load static %}
{% block additional_styles %}
<link href="{% static 'querybuilder/css/query-builder.default.min.css' %}" rel="stylesheet">
<link href="{% static 'querybuilder/css/query-builder.rtl.css' %}" rel="stylesheet">
<link href="{% static 'querybuilder/css/query-builder.overrides.css' %}" rel="stylesheet">
<link href="{% static 'tempus/css/tempus-dominus.min.css' %}" rel="stylesheet">
<link href="{% static 'css/advanced_search.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}

<div class="accordion" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingTwo">
      <button class="accordion-button collapsed" type="button" role="button" data-mdb-toggle="collapse" data-mdb-target="#collapseTwo"
        aria-expanded="true" aria-controls="collapseTwo">
        شروط البحث
      </button>
    </h2>
    <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo">
      <div class="accordion-body">
        <div>
          <div style="display: flex;gap: 10px;">
            <div style="flex-grow: 1;flex-basis: 0;">
              <div style="display: flex;gap: 10px; flex-direction: column;height: 100%;">
                <div class="input-group mb-3" style="margin-bottom: 0px !important;">
                  <label class="input-group-text" for="inputGroupSelect01"><span
                      class="bi-hdd-stack-fill pl10"></span>من بنك</label>
                  <select class="form-select" id="inputGroupSelect01" style="line-height: 1.2;">
                    <option value="view1">ملف الجميع</option>
                    <option value="view2">ملف الأفراد</option>
                    <option value="view3">ملف الملفات المبعثرة</option>
                  </select>
                </div>
                <div id="qbuilder1" style="flex-grow: 1;flex-basis: 0;"></div>
              </div>
            </div>
            <div style="flex-grow: 1;flex-basis: 0;">
              <div style="display: flex;gap: 10px; flex-direction: column;height: 100%;">
                <div class="input-group mb-3" style="margin-bottom: 0px !important;">
                  <label class="input-group-text" for="inputGroupSelect01"><span
                      class="bi-diagram-3-fill pl10"></span>عبر علاقة</label>
                  <select class="form-select" id="inputGroupSelect01" style="line-height: 1.2;">
                    <option value="view1">ملف الجميع</option>
                    <option value="view2">ملف الأفراد</option>
                    <option value="view3">ملف الملفات المبعثرة</option>
                  </select>
                </div>
                <div id="qbuilder2" style="flex-grow: 1;flex-basis: 0;"></div>
              </div>
            </div>
            <div style="flex-grow: 1;flex-basis: 0;">
              <div style="display: flex;gap: 10px; flex-direction: column;height: 100%;">
                <div class="input-group mb-3" style="margin-bottom: 0px !important;">
                  <label class="input-group-text" for="inputGroupSelect01"><span
                      class="bi-hdd-stack-fill pl10"></span>إلى بنك</label>
                  <select class="form-select" id="inputGroupSelect01" style="line-height: 1.2;">
                    <option value="view1">ملف الجميع</option>
                    <option value="view2">ملف الأفراد</option>
                    <option value="view3">ملف الملفات المبعثرة</option>
                  </select>
                </div>
                <div id="qbuilder3" style="flex-grow: 1;flex-basis: 0;"></div>
              </div>
            </div>
          </div>

          <div style="margin-top: 15px; display: flex; flex-direction: row-reverse;">
            <button class="btn btn-primary"><span class="bi-search pl10"></span>بحث</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingThree">
      <button class="accordion-button collapsed" type="button" data-mdb-toggle="collapse"
        data-mdb-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
        نتائج البحث
      </button>
    </h2>
    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree">
      <div class="accordion-body">
        <strong>This is the third item's accordion body.</strong> It is hidden by default,
        until the collapse plugin adds the appropriate classes that we use to style each
        element. These classes control the overall appearance, as well as the showing and
        hiding via CSS transitions. You can modify any of this with custom CSS or
        overriding our default variables. It's also worth noting that just about any HTML
        can go within the <strong>.accordion-body</strong>, though the transition does
        limit overflow.
      </div>
    </div>
  </div>
</div>


{% endblock %}

{% block additional_scripts %}
<script src="{% static 'querybuilder/js/query-builder.standalone.min.js' %}" type="text/javascript"></script>
<script src="{% static 'querybuilder/i18n/query-builder.ar.js' %}" type="text/javascript"></script>
<script src="{% static 'tempus/js/tempus-dominus.min.js' %}" type="text/javascript"></script>
<script src="{% static 'bootstrap/js/moment-with-locales.min.js' %}" type="text/javascript"></script>

<script>
  var getdtpuifunc = function (rule, input_name) {
    return "<input type='text' class='form-control' id='dtp" + input_name + "' name='" + input_name + "' />"
  }

  var data = {
    filters: [{
      id: 'name',
      label: 'Name',
      type: 'string'
    }, {
      id: 'category',
      label: 'Category',
      type: 'integer',
      input: 'select',
      values: {
        1: 'Books',
        2: 'Movies',
        3: 'Music',
        4: 'Tools',
        5: 'Goodies',
        6: 'Clothes'
      },
      operators: ['equal', 'not_equal', 'in', 'not_in', 'is_null', 'is_not_null']
    }, {
      id: 'in_stock',
      label: 'In stock',
      type: 'integer',
      input: 'radio',
      values: {
        1: 'نعم',
        0: 'كلا'
      },
      operators: ['equal']
    }, {
      id: 'price',
      label: 'Price',
      type: 'double',
      validation: {
        min: 0,
        step: 0.01
      }
    }, {
      id: 'date',
      label: 'Creation Date',
      type: 'datetime',
      input: getdtpuifunc
    }],
  }

  var builder_locale = {
    localization: {
      today: 'اليوم',
      clear: 'مسح',
      close: 'خروج',
      selectMonth: 'إختر شهر',
      previousMonth: 'الشهر السابق',
      nextMonth: 'الشهر التالي',
      selectYear: 'إختر سنة',
      previousYear: 'السنة السابقة',
      nextYear: 'السنة التالية',
      selectDecade: 'إختر عقد',
      previousDecade: 'العقد السابق',
      nextDecade: 'العقد التالي',
      previousCentury: 'القرن السابق',
      nextCentury: 'القرن التالي',
      pickHour: 'إختر ساعة',
      incrementHour: 'أضف ساعة',
      decrementHour: 'أنقص ساعة',
      pickMinute: 'إختر دقيقة',
      incrementMinute: 'أضف دقيقة',
      decrementMinute: 'أنقص دقيقة',
      pickSecond: 'إختر ثانية',
      incrementSecond: 'أضف ثانية',
      decrementSecond: 'أنقص ثانية',
      toggleMeridiem: 'صباحاً/مساءاً',
      selectTime: 'إختر وقت',
      selectDate: 'إختر تاريخ',
      dayViewHeaderFormat: { month: 'long', year: '2-digit' },
      locale: 'ar-ae',
      startOfTheWeek: 1
    }
  }

  var data1 = data;
  var data2 = data;
  var data3 = data;

  $('#qbuilder1').queryBuilder(data1);
  $('#qbuilder2').queryBuilder(data2);
  $('#qbuilder3').queryBuilder(data3);


  $('#qbuilder1').on('afterUpdateRuleFilter.queryBuilder', function (e, rule) {
    new tempusDominus.TempusDominus(document.getElementById('dtp' + rule.id + '_value_' + rule.id[rule.id.length - 1]), builder_locale);
  });
  $('#qbuilder2').on('afterUpdateRuleFilter.queryBuilder', function (e, rule) {
    new tempusDominus.TempusDominus(document.getElementById('dtp' + rule.id + '_value_' + rule.id[rule.id.length - 1]), builder_locale);
  });
  $('#qbuilder3').on('afterUpdateRuleFilter.queryBuilder', function (e, rule) {
    new tempusDominus.TempusDominus(document.getElementById('dtp' + rule.id + '_value_' + rule.id[rule.id.length - 1]), builder_locale);
  });
</script>
{% endblock %}